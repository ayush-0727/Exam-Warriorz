<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathJax Example</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        .question-container {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .options-container {
            margin-top: 10px;
        }
        .answer {
            display: none;
            margin-top: 10px;
            font-weight: bold;
            color: green;
        }
        button {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="question-container">
        <h2 id="question">Question will appear here</h2>
        <div id="options" class="options-container"></div>
        <button id="reveal-answer">Show Answer</button>
        <p id="answer" class="answer">Answer will appear here</p>
    </div>

    <script>
        // Function to load the JSON data
        async function loadQuestions() {
            const response = await fetch('./Data/NEET/Physics/1_Units_and_Measurement.json');  // Load the questions.json file
            const data = await response.json();
            return data;
        }

        // Function to insert a random question into the HTML
        async function insertRandomQuestion() {
            const questions = await loadQuestions();  // Load the questions array
            const numQuestions = parseInt(prompt("How many questions would you like to display?"), 10);
            const randomIndexes = new Set();

            while (randomIndexes.size < numQuestions) {
                const randomIndex = Math.floor(Math.random() * questions.length);
                randomIndexes.add(randomIndex);
            }

            randomIndexes.forEach(index => {
                const selectedQuestion = questions[index];  // Get the question at that index

                // Insert the question into the HTML
                const questionElement = document.createElement('h2');
                questionElement.innerHTML = selectedQuestion.question;
                document.body.appendChild(questionElement);

                // Insert the options into the HTML
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'options-container';

                // Loop through options and display them
                for (let i = 1; i <= 4; i++) {
                    const optionText = selectedQuestion[`option ${i}`];
                    if (optionText) {
                        const optionElement = document.createElement('p');
                        optionElement.innerHTML = `${i}. ${optionText}`;
                        optionsContainer.appendChild(optionElement);
                    }
                }

                document.body.appendChild(optionsContainer);

                // Set the answer (but don't show it yet)
                const correctOption = selectedQuestion.correct_option;
                const correctAnswer = selectedQuestion[`option ${correctOption}`];
                const answerElement = document.createElement('p');
                answerElement.className = 'answer';
                answerElement.innerHTML = `Correct Answer: ${correctAnswer}`;
                document.body.appendChild(answerElement);

                // Add button to reveal the answer
                const revealButton = document.createElement('button');
                revealButton.textContent = "Show Answer";
                revealButton.addEventListener('click', () => {
                    answerElement.style.display = 'block';
                });
                document.body.appendChild(revealButton);

                // Ensure MathJax renders the new content
                MathJax.typesetPromise().then(() => {
                    console.log("MathJax rendering complete.");
                });
            });
        }

        // Insert a random question when the page loads
        window.onload = insertRandomQuestion;
    </script>

</body>
</html>
